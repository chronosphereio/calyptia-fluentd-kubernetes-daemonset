<% fluentd_ver = version.split("-").first[1..-1] %>
<% target = (dockerfile.split("/").last.split("-").last) %>
<% is_alpine = (dockerfile.split("/").last.split("-").first == "alpine") %>
# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/Gemfile.erb

source "https://rubygems.org"

gem "fluentd", "<%= fluentd_ver %>"
gem "oj", "3.13.3"
gem "fluent-plugin-multi-format-parser", "~> 1.0.0"
gem "fluent-plugin-concat", "~> 2.5.0"
gem "fluent-plugin-grok-parser", "~> 2.6.2"
gem "fluent-plugin-prometheus", "~> 2.0.2"
gem "fluent-plugin-json-in-json-2", ">= 1.0.2"
gem "fluent-plugin-record-modifier", "~> 2.1.0"
gem "fluent-plugin-detect-exceptions", "~> 0.0.14"
gem "fluent-plugin-rewrite-tag-filter", "~> 2.4.0"
gem "fluent-plugin-parser-cri", "~> 0.1.0"
<% case target when "elasticsearch7" %>
gem "elasticsearch", "~> 7.0"
gem "fluent-plugin-elasticsearch", "~> 5.2.3"
gem "elasticsearch-xpack", "~> 7.0"
gem "fluent-plugin-dedot_filter", "~> 1.0"
<% when "elasticsearch8" %>
gem "elasticsearch", "~> 8.0"
gem "fluent-plugin-elasticsearch", "~> 5.2.3"
gem "fluent-plugin-dedot_filter", "~> 1.0"
<% when "opensearch" %>
gem "opensearch-ruby", "~> 2.0"
gem "fluent-plugin-opensearch", "~> 1.0"
gem "fluent-plugin-dedot_filter", "~> 1.0"
gem "aws-sdk-core", "~> 3.125"
gem "aws-sigv4", "~> 1.1"
gem "nokogiri", "~> 1.13"
<% when "kafka2" %>
gem "rdkafka", "~> 0.11.0"
gem "fluent-plugin-kafka", "~> 0.17.2"
gem "fluent-plugin-avro", "~> 1.1.1"
gem "fluent-plugin-parser-avro", "~> 0.3.1"
gem "snappy", "~> 0.0.15"
<% end %>
gem "fluent-plugin-kubernetes_metadata_filter", "~> 2.13.0"
<% if !is_alpine %>
gem "ffi"
gem "fluent-plugin-systemd", "~> 1.0.5"
gem "fluent-plugin-metrics-cmetrics", "~> 0.1.1"
gem "fluent-plugin-calyptia-monitoring", "~> 0.1.3"
<% end %>
